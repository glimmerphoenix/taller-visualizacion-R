<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Galería de gráficos – Visualización de datos con R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-grammar.html" rel="next">
<link href="./02-principles.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-elements.html">Fundamentos</a></li><li class="breadcrumb-item"><a href="./03-chart-types.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Galería de gráficos</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Visualización de datos con R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/glimmerphoenix/taller-reprod-R" title="Ejecutar el código" class="quarto-navigation-tool px-1" aria-label="Ejecutar el código"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Fundamentos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-elements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Elementos de la visualización de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Principios de visualización de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-chart-types.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Galería de gráficos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-grammar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Gramática de gráficos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Implementación</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">El paquete <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Gráficos para evaluación de modelos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualización de series temporales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualización de datos espaciales</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-add-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Recursos adicionales</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referencias</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Apéndices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-command-ref.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Referencia de comandos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Paquetes R y atribuciones</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referencias</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#taxonomía-de-gráficos" id="toc-taxonomía-de-gráficos" class="nav-link active" data-scroll-target="#taxonomía-de-gráficos"><span class="header-section-number">3.1</span> Taxonomía de gráficos</a>
  <ul class="collapse">
  <li><a href="#análisis-exploratorio-de-datos" id="toc-análisis-exploratorio-de-datos" class="nav-link" data-scroll-target="#análisis-exploratorio-de-datos"><span class="header-section-number">3.1.1</span> Análisis exploratorio de datos</a></li>
  <li><a href="#relaciones-cuantiativo-cuantitativo-gráficos-x-y" id="toc-relaciones-cuantiativo-cuantitativo-gráficos-x-y" class="nav-link" data-scroll-target="#relaciones-cuantiativo-cuantitativo-gráficos-x-y"><span class="header-section-number">3.1.2</span> Relaciones cuantiativo-cuantitativo (gráficos X-Y)</a></li>
  <li><a href="#relaciones-cuantitativo-cualitativo" id="toc-relaciones-cuantitativo-cualitativo" class="nav-link" data-scroll-target="#relaciones-cuantitativo-cualitativo"><span class="header-section-number">3.1.3</span> Relaciones cuantitativo-cualitativo</a></li>
  <li><a href="#proporciones" id="toc-proporciones" class="nav-link" data-scroll-target="#proporciones"><span class="header-section-number">3.1.4</span> Proporciones</a></li>
  <li><a href="#datos-espaciales" id="toc-datos-espaciales" class="nav-link" data-scroll-target="#datos-espaciales"><span class="header-section-number">3.1.5</span> Datos espaciales</a></li>
  <li><a href="#representación-de-la-incertidumbre" id="toc-representación-de-la-incertidumbre" class="nav-link" data-scroll-target="#representación-de-la-incertidumbre"><span class="header-section-number">3.1.6</span> Representación de la incertidumbre</a></li>
  </ul></li>
  <li><a href="#arbol-de-decisión-qué-grafico-escojo" id="toc-arbol-de-decisión-qué-grafico-escojo" class="nav-link" data-scroll-target="#arbol-de-decisión-qué-grafico-escojo"><span class="header-section-number">3.2</span> Arbol de decisión: ¿qué grafico escojo?</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/glimmerphoenix/taller-reprod-R/blob/main/03-chart-types.qmd" class="toc-action"><i class="bi bi-github"></i>Ver el código</a></li><li><a href="https://github.com/glimmerphoenix/taller-reprod-R/edit/main/03-chart-types.qmd" class="toc-action"><i class="bi empty"></i>Editar esta página</a></li><li><a href="https://github.com/glimmerphoenix/taller-reprod-R/issues/new" class="toc-action"><i class="bi empty"></i>Informar de un problema</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-elements.html">Fundamentos</a></li><li class="breadcrumb-item"><a href="./03-chart-types.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Galería de gráficos</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Galería de gráficos</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>En este capítulo, presentamos los principales tipos gráficos para visualización de datos que se suelen encontrar en proyectos de análisis de datos. Es esencial saber con qué opciones contamos para después elegir el tipo de gráfico y su modalidad que mejor se adapte a nuestros objetivos.</p>
<section id="taxonomía-de-gráficos" class="level2 page-columns page-full" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="taxonomía-de-gráficos"><span class="header-section-number">3.1</span> Taxonomía de gráficos</h2>
<p>A continuación, presentamos una taxonomía tentativa para clasificar diferentes tipos de gráficos en función del tipo de datos y atributos que queremos representar <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.</p>
<section id="análisis-exploratorio-de-datos" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="análisis-exploratorio-de-datos"><span class="header-section-number">3.1.1</span> Análisis exploratorio de datos</h3>
<p>El primer conjunto de tipos de gráficos corresponden a herramientas que podemos utilizar para representar distribuciones de valores. Estos gráficos se suelen emplear para resumir propiedades de conjuntos de datos en la fase de análisis exploratorio.</p>
<p>La <a href="#fig-graphs-distrib-i" class="quarto-xref">Figura&nbsp;<span>3.1</span></a> muestra un primer conjunto de gráficos para este propósito, que representa distribuciones de valores univariantes.</p>
<div id="fig-graphs-distrib-i" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-distrib-i-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-distribution-i.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-distrib-i-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.1: Algunos gráficos para representar distribuciones univariantes de valores numéricos. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Histograma</strong>: El histograma nos permite representar mediante un diagrama de barras verticales el número de ocurrencias o la frecuencia de aparición respecto al total de un intervalo de valores de un atributo numérico. Lo más usual es que los intervalos se representen en el eje horizontal y tengan todos la misma longitud, pero esto no siempre se cumple. Existen diferentes algoritmos y criterios para determinar el número de intervalos generados y el ancho de los mismos.</p></li>
<li><p><strong>Diagrama de densidad de probabilidad</strong> (KDE): Se puede ver como una aproximación continua del histograma, que muestra la frecuencia de aparición de los diferentes valores numéricos de la distribución descrita, es decir, la su <em>función de densidad de probabilidad</em> (o f.d.p.). Para su estimación se emplea el Estimador de Densidad del Kernel (KDE por sus siglas en inglés). Nuevamente, existen diferentes algoritmos y métodos para calcular dicho estimador. Este tipo de función tiene la ventaja de que permite comparar en el mismo gráfico varias f.d.p. simultáneamente, si no rellenamos el área bajo las curvas.</p></li>
<li><p><strong>Diagrama de densidad acumulada</strong> (CDF): Otra visión alternativa sobre cómo está repartida la distribución de valores de un atributo numérico. En este caso se representa la funcisió de densidad de probabilidad acumulada (o CDF, por sus siglas en inglés). Suele ser una herramienta muy versátil, tanto para interpretar mejor una distribución como para identificar qué posible función de distribución de probabilidad teórica se podría ajustar a un conjunto de valores.</p></li>
<li><p><strong>Gráfico cuantil-cuantil</strong> (<em>qqplot</em>): Herramienta gráfica comumnmente empleada para comprobar la bondad del ajuste de una distribución de valores empírica respecto de una distribución teórica. Por ejemplo, un uso frecuente es el de contrastar si los residuos de un modelo de regresión se ajustan de forma creíble a una distribución Normal.</p></li>
</ul>
<p>El segundo conjunto de gráficos que muestra la <a href="#fig-graphs-distrib-ii" class="quarto-xref">Figura&nbsp;<span>3.2</span></a> recoge herramientas para representar distribuciones de valores de un atributo en función de los valores de otro atributo categórico (factor en R).</p>
<div id="fig-graphs-distrib-ii" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-distrib-ii-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-distribution-ii.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-distrib-ii-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.2: Algunos gráficos para representar distribuciones de valores en función de otro atributo categórico. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Boxplot</strong>: Su creación se debe al insigne estadístico John W. Tukey <span class="citation" data-cites="tukey1977">(<a href="references.html#ref-tukey1977" role="doc-biblioref">Tukey, 1977</a>)</span>, que lo propuso como herramienta básica para el EDA. Originalmente también se denominó <em>box-and-whiskers</em> plot, ya que consiste en la combinación de una caja con líneas o “bigotes” a ambos lados. Se trata de un gráfico que muestra un resumen simplificado de la distribución de valores de un atributo numérico, centrándose en cinco estadísticos de resumen claves que se muestran en la <a href="#fig-boxplot-annotated" class="quarto-xref">Figura&nbsp;<span>3.3</span></a>:</p>
<ul>
<li><em>Mediana</em>: se representa mediante una línea dentro de la caja.</li>
<li><em>Rango intercuartílico</em> (IQR): determina las dimensiones de la caja o <em>box</em> en el gráfico. El IQR se calcula como la diferencia entre el percentil 25 (primer cuartil o <span class="math inline">\(Q_1\)</span>) y el percentil 75 (tercer cuartil o <span class="math inline">\(Q_3\)</span>) de la distribución de valores.</li>
<li><em>Valores dentro del “cuerpo principal” de la distribución</em>: los “bigotes” o líneas a ambos lados de la caja se extienden en cada sentido hasta <span class="math inline">\(Q_1 - 1.5*IQR\)</span> y <span class="math inline">\(Q_3 + 1.5*IQR\)</span>. Los valores que caen más allá de estos dos puntos a cada lado de la distribución se pueden considerar como valores <strong>atípicos</strong> (en inglés <em>outliers</em>).</li>
<li><em>Valores atípicos</em>: se representan como puntos o símbolos individuales en el gráfico, a ambos lados del cuerpo principal de la distribución (si es que existen).</li>
</ul></li>
</ul>
<div id="fig-boxplot-annotated" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot-annotated-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/boxplot-annotated.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot-annotated-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.3: Explicación anotada de los elementos que componen un <em>boxplot</em>. Fuente: <a href="https://www.data-to-viz.com/caveat/boxplot.html" class="uri">https://www.data-to-viz.com/caveat/boxplot.html</a>.
</figcaption>
</figure>
</div>
<ul>
<li><strong>Violín</strong>: Una importante limitación del <em>boxplot</em> es que al resumir el aspecto de la distribución de valores mediante un gráfico esquemático en forma de caja perdemos información sobre la <em>forma</em> de la distribución real de valores subyancente (la f.d.p.). En consecuencia, se han propuesto alternativas como, por ejemplo, el gráfico de violín (en inglés <em>violing plot</em>), que representa la estimación de la f.d.p. en ambos laterales de lo que sería la caja del boxplot, añadiendo más información al gráfico. Sin embargo, esta alternativa es, de igual modo, más difícil de interpretar.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Añadir <em>jitter</em> o puntos con desplazamiento aleatorio
</div>
</div>
<div class="callout-body-container callout-body">
<p>Otra alternativa (quizá aún más confusa, depende de la situación) para añadir más información sobre la distribución de valores subyacente en el boxplot consiste en representar los elementos reales como puntos o símbolos superpuestos a la caja, como se representa en la <a href="#fig-boxplot-jitter" class="quarto-xref">Figura&nbsp;<span>3.4</span></a>. Para poder ver todos los puntos se añade horizontalmente un pequeño desplazamiento aleatorio o <em>jitter</em>, de forma que se repartan por todo el área de la caja pero respetando su ubicación en la distribución de valores.</p>
</div>
</div>
<div id="fig-boxplot-jitter" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot-jitter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/boxplot-jitter.png" class="img-fluid figure-img" style="width:85.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot-jitter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.4: Cómo añadir puntos con <em>jitter</em> sobrepuestos al <em>boxplot</em> original. Fuente: <a href="https://r-graph-gallery.com/89-box-and-scatter-plot-with-ggplot2.html" class="uri">https://r-graph-gallery.com/89-box-and-scatter-plot-with-ggplot2.html</a>.
</figcaption>
</figure>
</div>
<ul>
<li><p><em>Strip charts</em>: semejantes a los gráficos de boxplot con puntos sobrepuestos utilizando <em>jitter</em>, pero eliminando la representació esquemática de la caja y las líneas del cuerpo principal de la distribución. En ocasiones, la forma del gráfico de violín se combina con el <em>strip chart</em> para crear un <em>swarm plot</em> o <em>beeswarm plot</em>, que también se puede crear fácilmente en R con el paquete []<code>ggbeeswarm</code>](https://r-charts.com/distribution/ggbeeswarm/).</p></li>
<li><p>Histogramas apilados: se pueden apilar las barras de los histogramas para comparar diferentes distribuciones, aunque el gráfico resultante no es sencillo de interpretar para las distribuciones que no quedan en la parte inferior del gráfico (sólo se muestran con claridad diferencias acusadas entre grupos para el mismo intervalo).</p></li>
<li><p>Diagramas de densidad solapados: una ventaja de los diagramas de densidad de probabilidad es que permiten representar varios de ellos en el mismo gráfico sobrepuestos unos a otros, siempre que utilicemos transparencia en el color de relleno del área bajo cada curva o bien que sólo coloreemos las líneas de la distribución correspondiente a cada grupo. Un ejemplo se muestra en la <a href="#fig-density-plots-overlap" class="quarto-xref">Figura&nbsp;<span>3.5</span></a>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridisLite)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>diamonds, <span class="fu">aes</span>(<span class="at">x=</span>price, <span class="at">group=</span>cut, <span class="at">fill=</span>cut)) <span class="sc">+</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">4</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-density-plots-overlap" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-density-plots-overlap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-chart-types_files/figure-html/fig-density-plots-overlap-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-density-plots-overlap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.5: Diagramas de densidad de probabilidad solapados para comparar las distribuciones correspondientes a varios grupos. Fuente: <a href="https://r-graph-gallery.com/135-stacked-density-graph.html" class="uri">https://r-graph-gallery.com/135-stacked-density-graph.html</a>.
</figcaption>
</figure>
</div>
</div>
</div>
<ul>
<li><em>Ridgeline plot</em>: es una variante más organizada de los gráficos de densidad de probabilidad solapados. En este tipo de gráfico, se garantiza que todas las f.d.p. estimadas tienen la misma escala de representación horizontal, los mismos parámetros de configuración para el KDE y los gráficos para cada grupo se separan lo justo para permitir una comparación rápida y más precisa de las diferentes funciones de densidad estimadas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo básico de *ridgeplot*</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">y =</span> cut, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 458</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-ggridges" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ggridges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-chart-types_files/figure-html/fig-ggridges-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ggridges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.6: Ejemplo de un gráfido <em>ridgeline</em> creado mediante el paquete <code>ggridges</code>, extensión de <code>ggplot2</code>.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="relaciones-cuantiativo-cuantitativo-gráficos-x-y" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="relaciones-cuantiativo-cuantitativo-gráficos-x-y"><span class="header-section-number">3.1.2</span> Relaciones cuantiativo-cuantitativo (gráficos X-Y)</h3>
<p>En esta sección resumimos algunos gráficos para representación de relaciones entre variables cuantitativas en ambos ejes (suponiendo un gráfico 2D). Empezamos por los tipos báiscos que se muestran en la <a href="#fig-graphs-xy" class="quarto-xref">Figura&nbsp;<span>3.7</span></a>.</p>
<div id="fig-graphs-xy" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-xy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-scatter-i.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-xy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.7: Algunos gráficos para representar relaciones entre valores de dos atributos numéricos. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Gráfico de dispersión o <em>scatterplot</em>: es el típico gráfico de coordenadas cartesianas, representando cada elemento por un punto o un símbolo. En el caso de que, además, se quieran representar puntos pertenecientes a varias categorías se puede emplear un canal adicional (color, símbolo) con una leyenda para facilitar la interpretación del gráfico.</p></li>
<li><p>Gráfico de burbujas: permite representar simultáneamente tres atributos cuantitativos, utilizando el tamaño del círculo o burbuja para representar la tercera dimensión de los atributos.</p></li>
<li><p><em>Scatterplot</em> emparejado: es un caso especial en el que se comparan dos medidas del mismo atributo o de atributos diferentes pero medidos en las mismas unidades y con la misma escala. En ese caso, suele ser útil representar la línea <span class="math inline">\(x=y\)</span>. Un ejemplo de este tipo de gráficos que hemos mencionado antes es el <em>qqplot</em>.</p></li>
<li><p><em>Slopegraph</em>: otro tipo de gráfico para representar parejas de datos. Cada pareja de puntos se une mediante una línea horizontal, que nos da una idea de la variación que se ha producido entre los valores de esa pareja.</p></li>
</ul>
<p>Continuamos con otro conjunto de gráficos que permiten resumir los datos usando curvas de nivel o contorno, intervalos o <em>bins</em> o correlogramas, que se muestran en la <a href="#fig-graphs-xy-binning" class="quarto-xref">Figura&nbsp;<span>3.8</span></a>.</p>
<div id="fig-graphs-xy-binning" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-xy-binning-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-xy-binning.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-xy-binning-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.8: Algunos gráficos para resumir relaciones entre valores de dos atributos numéricos. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Curvas de nivel: Las curvas de nivel permiten representar valores cuantitativos repartidos en una superficie continua, de forma que puedan ser interpretables.</p></li>
<li><p>Celdas o intervalos en 2D y hexagonales: Otra variante para representar datos cuantitativos repartidos en una superficie continua consiste en establecer primero una malla de celdas (cuadradas o hexagonales) representando mediante un canal (normalmente color) el valor promedio de la variable cuantitativa dentro de esa celda.</p>
<ul>
<li>Una variante de los <em>bins</em> cuadrados en 2D es el gráfico de actividad que muestra número de acciones en cada periodo de tiempo (días, semanas, etc.). Un buen ejemplo son los gráficos de actividad para los perfiles de usuario de GitHub, como se muestra en la <a href="#fig-wickham-github-contribs" class="quarto-xref">Figura&nbsp;<span>3.9</span></a>.</li>
</ul></li>
</ul>
<div id="fig-wickham-github-contribs" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wickham-github-contribs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/wickham-github-contribs.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wickham-github-contribs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.9: Gráfico de actividad con bins en 2D que muestra el número de contribuciones diarias del usuario H. Wickham en GitHub. Fuente: <a href="https://github.com/hadley" class="uri">https://github.com/hadley</a>.
</figcaption>
</figure>
</div>
<ul>
<li><strong>Correlograma</strong>: es un gráfico en el que se representa gráficamente el grado de correlación entre los valores de varios atributos. La representación concreta de cada correlograma puede variar mucho. Algunos utilizan el canal de color y una paleta divergente para distinguir claramente las correlaciones positivas o negativas. En otros casos se añaden más canales (cambios de forma, formas incompletas representando correlación parcial). La <a href="#fig-correlogram" class="quarto-xref">Figura&nbsp;<span>3.10</span></a> presenta un ejemplo de correlograma creado con el paquete <code>ggcorrplot</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggcorrplot)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(colorspace)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>corr <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">cor</span>(mtcars), <span class="dv">2</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>my_palette <span class="ot">&lt;-</span> <span class="fu">diverging_hcl</span>(<span class="dv">3</span>, <span class="at">palette =</span> <span class="st">"Blue-Red"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(corr, <span class="at">hc.order =</span> <span class="cn">TRUE</span>, <span class="at">type =</span> <span class="st">"lower"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>   <span class="at">outline.col =</span> <span class="st">"white"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>   <span class="at">ggtheme =</span> ggplot2<span class="sc">::</span>theme_gray,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">colors =</span> my_palette)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-correlogram" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-correlogram-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-chart-types_files/figure-html/fig-correlogram-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-correlogram-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.10: Correlograma para las variables cuantitativas del <em>dataset</em> <code>mtcars</code> producido con el paquete <code>ggcorrplot</code>.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Por último, existe un subconjunto de gráficos en esta categoría para representar datos con estricta dependencia temporal, o bien con dependencia de una variable con ordenación (por ejemplo, cantidad de dosis administrada de un fertilizante o un fungicida). También se encuentran en este subconjunto las líneas de estimación de tendencia o <em>smooth line</em>. Todos ellos se muestran en la <a href="#fig-graphs-xy-lines" class="quarto-xref">Figura&nbsp;<span>3.11</span></a>.</p>
<div id="fig-graphs-xy-lines" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-xy-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-xy-lines.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-xy-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.11: Algunos gráficos para representar valores numéricos con dependencia temporal, relacionados con variables ordenadas o para estimar tendencias. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>
</figcaption>
</figure>
</div>
<ul>
<li>Gráfico de línea: los puntos o símbolos del gráfico se enlazan mediante una línea que remarca la secuencialidad entre las muestras. Un ejemplo de este tipo son los gráficos de series temporales, como el que se muestra en la</li>
</ul>
<ol class="example" type="1">
<li></li>
</ol>
<div id="fig-timeseries-example" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-timeseries-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/time-series-example.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-timeseries-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.12: Series temporales del número total de envíos mensuales de artículos de investigación a tres servidores de <em>preprints</em> en investigación biomédica. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>; fuente de datos: Jordan Anaya, <a href="http://www.prepubmed.org/" class="uri">http://www.prepubmed.org/</a>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Scatterplot conectado: es un gráfico en el que se representan valores de un diagrama de dispersión conectados por lineas que denotan una secuencialidad temporal entre los elementos. Hay que usarlos con cuidado, sobre todo al construirlos, para que el resultado no sea difícil de intrepretar.</p></li>
<li><p>Línea suavizada de tendencia (<em>smooth line</em>): se trata de funciones suavizadas que resumen tendencias globales de los valores en gráficos de dispersión. Existen diversos algoritmos para generarlas, como por ejemplo el LOESS <span class="citation" data-cites="cleveland1992">(<a href="references.html#ref-cleveland1992" role="doc-biblioref">Cleveland et&nbsp;al., 1992</a>)</span> o LOWESS <span class="citation" data-cites="cleveland1981lowess">(<a href="references.html#ref-cleveland1981lowess" role="doc-biblioref">Cleveland, 1981</a>)</span>. Veamos un ejemplo con el paquete <code>ggplot2</code> y la función integrada <code>geom_smooth()</code>, ilustrado en la <a href="#fig-geom-smooth" class="quarto-xref">Figura&nbsp;<span>3.13</span></a>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">formula =</span> <span class="st">'y ~ x'</span>) <span class="sc">+</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-geom-smooth" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-geom-smooth-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-chart-types_files/figure-html/fig-geom-smooth-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-geom-smooth-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.13: Diagramas de dispersión comparando el cubicaje y la autonomía de diferentes modelos de automóviles en 1999 y 2008.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="relaciones-cuantitativo-cualitativo" class="level3 page-columns page-full" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="relaciones-cuantitativo-cualitativo"><span class="header-section-number">3.1.3</span> Relaciones cuantitativo-cualitativo</h3>
<p>En la <a href="#fig-graphs-amounts" class="quarto-xref">Figura&nbsp;<span>3.14</span></a> se muestran los tipos básicos de gráficos para representación de valores numéricos frente a valores de una variable categórica.</p>
<div id="fig-graphs-amounts" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-amounts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-amounts-i.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-amounts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.14: Gráficos para representar relaciones entre un atributo cuantitativo y otro categórico. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Diagrama de barras: este tipo de gráfico es sobradamente conocido. Permite representar cifras correspondientes a varias categorías para compararlas entre sí. No obstante, hay algunos aspectos que pueden facilitar su interpretación:</p>
<ul>
<li><p>Barras horizontales: cambiar la orientación de las barras puede ser una buena estrategia si estamos comparando muchas categorías y las diferencias entre ellas no son muy grandes. Esto se debe a que nuestra percepción visual de las diferencias entre objetos horizontales es más precisa que cuando los objetos se orientan verticalmente.</p></li>
<li><p>Ordenación de las barras: podemos ordenar las barras en sentido creciente o decreciente para ayudar a nuestra audiencia a identificar rápidamente los casos extremos, siempre y cuando no estemos obligados a ordenar las categorías por algún otro criterio específico.</p></li>
</ul></li>
<li><p><em>Dotplot</em> (diagrama de puntos): propuesto por W. S. Cleveland <span class="citation" data-cites="cleveland1984dot">(<a href="references.html#ref-cleveland1984dot" role="doc-biblioref">Cleveland, s.&nbsp;f.</a>)</span> para simplificar la representación de la información en un diagrama de barras. Es compatible con la representación de intervalos de confianza y barras de error. Además, permite también comparar resultados entre grupos para cada categoría, tal y como muestra la <a href="#fig-dotplot-comparison" class="quarto-xref">Figura&nbsp;<span>3.15</span></a>, lo que aumenta aún más si cabe su utilidad.</p></li>
</ul>
<div id="fig-dotplot-comparison" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dotplot-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/dotplot-comparison.png" height="600" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dotplot-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.15: Ejemplo de un Cleveland <em>dotplot</em> que compara los ingresos de mujeres y hombres en varias ciudades de EE.UU. Fuente: <a href="https://uc-r.github.io/cleveland-dot-plots" class="uri">https://uc-r.github.io/cleveland-dot-plots</a>
</figcaption>
</figure>
</div>
<p>En este ejemplo, podemos observar que las ciudades se han ordenado de mayor a menor cantidad de ingresos. También se ha utilizado el canal <em>color</em> para distinguir los puntos correspondientes a los ingresos de los hombres respecto a los de las mujeres y se ha añadido una anotación que cuantifica su diferencia positiva o negativa. El subtítulo del gráfico muestra algunas conclusiones principales, con lo que podemos interpretar el gráfico con mayor rapidez.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Confusión con el término <em>dotplot</em>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Aunque el término <em>dotplot</em> fue propuesto inicialmente por W. S. Cleveland en 1984 y tiene un claro significado para gran parte de la comunidad de visualización de datos (remarcado, en ocasiones, anteponiendo el apellido de su creador), herramientas actuales como <code>ggplot2</code> incluyen una función <code>geom_dotplot()</code> que no tiene nada que ver con este tipo de gráfico, como podemos comprobar en los <a href="https://ggplot2.tidyverse.org/reference/geom_dotplot.html">ejemplos de la documentación oficial</a>.</p>
<p>Esta desafortunada ambigüedad no se va a poder corregir fácilmente, puesto que la API de <code>ggplot2</code> ya está muy consolidada. Para agravar aún más si cabe esta confusión, podemos encontrar el tipo de gráfico <em>dotplot</em> original de Cleveland bajo otros seudónimos, como <a href="https://r-graph-gallery.com/lollipop-plot.html"><em>lollipop plot</em></a>.</p>
<p>Como siempre, lo importante es entender bien el concepto y el tipo de gráfico que queremos construir.</p>
</div>
</div>
<p>La <a href="#fig-graphs-amounts-multi" class="quarto-xref">Figura&nbsp;<span>3.16</span></a> muestra gráficos para representar relaciones entre una variable cuantitativa y varias categorías de manera simultánea en la misma imagen.</p>
<div id="fig-graphs-amounts-multi" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-amounts-multi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-amounts-multi.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-amounts-multi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.16: Gráficos para representar relaciones entre un atributo cuantitativo y varias categorías simultáneamente. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Diagrama de barras agrupado: como el diagrama de barras tradicional, pero añadiendo dentro de cada categoría principal una barra por cada categoría de la segunda variable cualitativa que estamos comparando. Para evitar repetir la etiqueta de los valores de la segunda categoría en cada grupo, normalmente se usa otro canal (color) para distinguirlas, indicando en una leyenda en nombre de la categoría de la segunda variable que corresponde a cada valor del canal.</p></li>
<li><p>Diagrama de barras apiladas (<em>stacked bars</em>): cuando el objetivo es comparar los valores de una subcategoría con los de esa misma subcategoría en otras categorías principales del gráfico, podemos crear un diagrama de barras apilado para comprar más directamente los segmentos de cada subcategoría.</p></li>
<li><p>Mapa de calor (<em>heatmap</em>): permite comparar diferentes ítems según los valores de una variable cuantitativa obtenidos para dos variables categóricas simultáneamente. En R se pueden <a href="https://r-graph-gallery.com/heatmap.html">construir un heatmap</a> utilizando varios paquetes, obteniendo tanto gráficos estáticos como interactivos (dinámicos). Un ejemplo se muestra en la <a href="#fig-heatmaply" class="quarto-xref">Figura&nbsp;<span>3.17</span></a>, con una captura estática de un <em>heatmap</em> interactivo para comparar varios países en función de los valores obtenidos en varios índices de medición de nivel de bienestar y desarrollo en cada país. Este <em>heatmap</em> también incorpora un dendongrama en cada margen, ofreciendo pistas adicionales sobre los países más similares entre sí (consulta la referencia para ver el código fuente que genera este gráfico).</p></li>
</ul>
<div class="page-columns page-full">
<div id="fig-heatmaply" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-heatmaply-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<img src="img/heatmaply.png" style="width:95.0%" height="700" class="figure-img column-page-inset-right">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-heatmaply-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.17: Mapa de calor (<em>heatmap</em>) para comparar varios países según los valores de diferentes índices de bienestar y desarrollo en cada uno de ellos. Fuente: <a href="https://www.data-to-viz.com/graph/heatmap.html" class="uri">https://www.data-to-viz.com/graph/heatmap.html</a>.
</figcaption>
</figure>
</div>
</div>
</section>
<section id="proporciones" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="proporciones"><span class="header-section-number">3.1.4</span> Proporciones</h3>
<p>Los gráficos básicos para representación de proporciones están resumidos en la <a href="#fig-graphs-props" class="quarto-xref">Figura&nbsp;<span>3.18</span></a>.</p>
<div id="fig-graphs-props" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-props-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-proportions.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-props-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.18: Gráficos básicos para representación de proporciones. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Diagrama de sectores (<em>pie chart</em>): otro tipo de gráfico sobradamente conocido y, dicho sea también, muy denostado en la comunidad de visualización de datos por sus dudosas propiedades para reflejar de forma precisa la información que queremos comparar, sobre todo si las categorías tienen porcentajes muy semejantes (es decir, si los sectores tienen tamaños muy parecidos).</p></li>
<li><p>Diagrama de barras (porcentual): en este caso cada barra refleja proporciones (en %) y no valores absolutos de un atributo numérico.</p></li>
</ul>
<p>A su vez, la <a href="#fig-graphs-props-multi" class="quarto-xref">Figura&nbsp;<span>3.19</span></a> muestra distintos tipos de diagramas para representar mútiples conjuntos de proporciones.</p>
<div id="fig-graphs-props-multi" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-props-multi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-proportions-multi.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-props-multi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.19: Gráficos básicos para representación de múltiples conjuntos de proporciones. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Diagramas de sectores múltiples: cuidado con este tipo de gráfico, puesto que si ya es complicado en ocasiones comparar los sectores en un solo diagrama imaginemos cómo se complica la tarea cuando hay que comparar sectores de varios diagramas de forma simultánea.</p></li>
<li><p>Diagramas de barras agrupados y apilados: son aplicables los mismos comentarios que en el caso de representación de valores absolutos. No obstante, en el caso de las proporciones suele ser más preciso y útil para interpretar el gráfico usar la modalidad de barras apiladas.</p></li>
<li><p>Diagramas de densidades apiladas: ofrecen una solución rápida para comparar proporciones. Sin embargo, tiene dos desventajas. La primera es que usamos demasiada “tinta” para el gráfico. La segunda es que es complicado interpretar la distribución de valores para cualquier categoría excepto la que está en la base del gráfico. Podemos ver un <a href="https://r-graph-gallery.com/135-stacked-density-graph.html#stacked">ejemplo de este tipo</a> de gráficos para comprender mejor sus ventajas e inconvenientes.</p></li>
</ul>
<p>Por último, la <a href="#fig-graphs-props-comp" class="quarto-xref">Figura&nbsp;<span>3.20</span></a> muestra gráficos para desglosar proporciones en función de más de una variable categórica a la vez en la misma figura.</p>
<div id="fig-graphs-props-comp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-props-comp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-proportions-comp.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-props-comp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.20: Gráficos para representación de proporciones en función de más de una categoría de forma simultánea. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li>Gráfico de mosaico (<em>mosaic plot</em>): permite crear áreas coloreadas para comparar proporciones entre dos o más atributos categóricos a la vez. Si comparamos más de dos variables cualitativas, tendremos que hacer un <em>mosaic plot</em> para cada categoría de la tercera variable. En la <a href="#fig-mosaic" class="quarto-xref">Figura&nbsp;<span>3.21</span></a> se presenta un ejemplo de gráfico de mosaico para comparar los porcentajes de respuestas a dos preguntas de un cuestionario.</li>
</ul>
<div id="fig-mosaic" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mosaic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/mosaic.png" class="img-fluid figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mosaic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.21: Ejemplo de un gráfico de mosaico creado con el paquete <code>ggmosaic</code> en R. Fuente: &lt;https://cran.r-project.org/web/packages/ggmosaic/vignettes/ggmosaic.html
</figcaption>
</figure>
</div>
<ul>
<li><em>Treemap</em>: a pesar de su parecido con los gráficos de mosaico, el <em>treemap</em> tiene una diferencia importante, que radica en que representamos <strong>datos jerárquicos</strong> como un conjunto de rectángulos <em>anidados</em>. Por tanto, sólo es válido para representar proporciones de subcategorías que se unen para formar otra categoría mayor, como vemos en el ejemplo de la <a href="#fig-treemap" class="quarto-xref">Figura&nbsp;<span>3.22</span></a>.</li>
</ul>
<div id="fig-treemap" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-treemap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/treemap.png" class="img-fluid figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-treemap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.22: Ejemplo de un <em>treemap</em> que representa proporciones de varias subcategorías dentro de tres categorías principales. Fuente: <a href="https://r-graph-gallery.com/235-treemap-with-subgroups.html" class="uri">https://r-graph-gallery.com/235-treemap-with-subgroups.html</a>.
</figcaption>
</figure>
</div>
<ul>
<li>Conjuntos paralelos (<em>parallel sets</em> o <em>alluvial plot</em>): se trata de un gráfico algo más difícil de intrepretar a primera vista, pero de enorme utilidad cuando conseguimos entender su mecánica funcional. Representa el porcentaje de una categoría que va a parar al resto de categorías de otra u otras variables (se pueden añadir más variables a la derecha, pero cada vez es más complicado “seguirle al pista” a los flujos). La <a href="#fig-alluvial" class="quarto-xref">Figura&nbsp;<span>3.23</span></a> presenta un ejemplo de este tipo de gráficos, mostrando el desglose de pasajeros del viaje inaugural del Titanic en función de diversos factores: cubierta donde se alojaban, género y rango de edad. El <a href="https://corybrunson.github.io/ggalluvial/">paquete <code>ggalluvial</code></a> facilita la construcción de este tipo de gráficos en R con <code>ggplot2</code> <span class="citation" data-cites="ggalluvial-article">(<a href="references.html#ref-ggalluvial-article" role="doc-biblioref">Brunson, 2020</a>)</span>.</li>
</ul>
<div id="fig-alluvial" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-alluvial-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/alluvial.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-alluvial-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.23: Ejemplo de un <em>alluvial plot</em> para desglosar los pasajeros del viaje inaugural del Titanic según tres posibles factores. Fuente: <a href="https://corybrunson.github.io/ggalluvial/" class="uri">https://corybrunson.github.io/ggalluvial/</a>
</figcaption>
</figure>
</div>
</section>
<section id="datos-espaciales" class="level3" data-number="3.1.5">
<h3 data-number="3.1.5" class="anchored" data-anchor-id="datos-espaciales"><span class="header-section-number">3.1.5</span> Datos espaciales</h3>
<p>La <a href="#fig-graphs-geo" class="quarto-xref">Figura&nbsp;<span>3.24</span></a> muestra algunos gráficos básicos para representación de datos con dependencias espaciales.</p>
<div id="fig-graphs-geo" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-geo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-geospatial.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-geo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.24: Gráficos básicos para representación de datos espaciales. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Mapa: como resulta evidente, la opción más directa es representar datos geolocalizados mediante algún tipo de mapa (político, geográfico, etc.), posiblemente enriquecido con información adicional para proporcionar más contexto. En el <a href="08-spatial.html" class="quarto-xref"><span>Capítulo 8</span></a> veremos más detalles, aunque este tipo de gráficos no son el objeto principal de este taller, debido a que requieren gran cantidad de conceptos y herramientas propias de este dominio. Para más información, se recomienda consultar referencias actualizadas y de calidad como <a href="https://r.geocompx.org/" class="uri">https://r.geocompx.org/</a> <span class="citation" data-cites="lovelace2025">(<a href="references.html#ref-lovelace2025" role="doc-biblioref">Lovelace et&nbsp;al., 2025</a>)</span> o <a href="https://r-spatial.org/book/" class="uri">https://r-spatial.org/book/</a> <span class="citation" data-cites="pebesma2023">(<a href="references.html#ref-pebesma2023" role="doc-biblioref">Pebesma &amp; Bivand, 2023</a>)</span>.</p></li>
<li><p><em>Choropleth</em>: es un tipo de mapa en el que se colorean, sombrean o degradan las regiones según los valores de cierto atributo. Tienen un gran poder explicativo, especialmente cuando las unidades espaciales nos resultan familiares, como una región o el mápa político de un país. Un ejemplo se muestra en la <a href="#fig-election-usa-states" class="quarto-xref">Figura&nbsp;<span>3.25</span></a></p></li>
</ul>
<div id="fig-election-usa-states" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-election-usa-states-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/election-usa-states.png" class="img-fluid figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-election-usa-states-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.25: <em>Choropleth</em> que representa los resultados de las elecciones presidenciales en EE.UU. de 2016. Fuente: <a href="https://socviz.co/maps.html" class="uri">https://socviz.co/maps.html</a>.
</figcaption>
</figure>
</div>
<ul>
<li>Cartograma y artograma de calor (<em>cartogram heatmap</em>): Son gráficos en los que se muestra esquemáticamente los resultados de variables geolocalizadas, sin utilizar los polígonos correspondientes a las regiones reales. Un ejemplo de este tipo de gráficos se muestra en la <a href="#fig-election-usa-statebins" class="quarto-xref">Figura&nbsp;<span>3.26</span></a>.</li>
</ul>
<div id="fig-election-usa-statebins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-election-usa-statebins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/election-usa-statebins.png" class="img-fluid figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-election-usa-statebins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.26: Cartograma que representa esquemáticamente los resultados de las elecciones presidenciaels en EE.UU. de 2016. Fuente: <a href="https://socviz.co/maps.html" class="uri">https://socviz.co/maps.html</a>
</figcaption>
</figure>
</div>
</section>
<section id="representación-de-la-incertidumbre" class="level3" data-number="3.1.6">
<h3 data-number="3.1.6" class="anchored" data-anchor-id="representación-de-la-incertidumbre"><span class="header-section-number">3.1.6</span> Representación de la incertidumbre</h3>
<p>La <a href="#fig-graphs-error-bars" class="quarto-xref">Figura&nbsp;<span>3.27</span></a> muestra varios ejemplos de gráficos que representan márgenes de error en medidas o estimaciones estadísticas.</p>
<div id="fig-graphs-error-bars" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-error-bars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-errorbars.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-error-bars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.27: Gráficos básicos para representación de barras de estimaciones de error. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<ul>
<li><p>Barras de error: cuando los diagramas de barras representan valores estadísticos, como media, mediana, desviación típica, etc. es aconsejable añadir barras de error en sobre la parte superior de cada barra, para indicar la variabilidad en la estimación. Un ejemplo de esta práctica se ilustra en la <a href="#fig-error-bars" class="quarto-xref">Figura&nbsp;<span>3.28</span></a>.</p>
<div id="fig-error-bars" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-error-bars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/error-bars.png" class="img-fluid figure-img" style="width:85.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-error-bars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.28: Ejemplo de un gráfico de barras que incluye barras de error. Fuente: <a href="https://www.data-to-viz.com/caveat/error_bar.html" class="uri">https://www.data-to-viz.com/caveat/error_bar.html</a>.
</figcaption>
</figure>
</div>
<p>Sin embargo, la utilización de barras de error puede ocultar información valiosa al espectador, como se muestra en la</p>
<ol start="2" class="example" type="1">
<li>Vemos que el mismo diagrama de barras con barras de error corresponde con diferentes distribuciones de los datos. Por ese motivo, se desaconseja en muchos casos usar este tipo de diagramas, en favor de la utilización del <em>boxplot</em>, <em>violin plot</em>, <em>swarm plot</em> o alguna otra variante que muestre información adicional sobre la distribución de los datos originales.</li>
</ol>
<div id="fig-error-bars-hiding" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-error-bars-hiding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/error-bars-hiding.png" class="img-fluid figure-img" style="width:85.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-error-bars-hiding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.29: Ejemplo de un gráfico de barras que incluye barras de error y corresponde a diferentes distribuciones de datos subyacentes. Fuente: <a href="https://www.data-to-viz.com/caveat/error_bar.html" class="uri">https://www.data-to-viz.com/caveat/error_bar.html</a>.
</figcaption>
</figure>
</div></li>
</ul>
<p>A su vez, la <a href="#fig-conf-dist" class="quarto-xref">Figura&nbsp;<span>3.30</span></a> muestra varios ejemplos de gráficos para visualización de la distribución de probabilidad en intervalos de confianza o en modelos (<em>a priori</em> y <em>a posteriori</em>).</p>
<div id="fig-conf-dist" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-conf-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-confidence-dists.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-conf-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.30: Gráficos básicos para representación de estimaciones estadísticas. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<p>En este caso, conviene destacar que lo más importante es dejar claro a nuestra audiencia qué representan las bandas o intervalos de confianza, de forma que los resultados se puedan interpretar sin cometer errores.</p>
<p>Por último, tenemos algunas modalidades para representar bandas de intervalos de confianza en estimaciones gráficas (curvas resultado de ajustes y modelos), que suelen incluir diferentes anchos o gradaciones para indicar diferentes intervalos en el mismo gráfico (c.i. 90%; c.i. 95%, etc.). Varios ejemplos aparecen esquematizados en la <a href="#fig-graphs-conf-bands" class="quarto-xref">Figura&nbsp;<span>3.31</span></a>.</p>
<div id="fig-graphs-conf-bands" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graphs-conf-bands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/graphs-confidence-bands.png" class="img-fluid figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graphs-conf-bands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.31: Gráficos básicos para representación de intervalos de confianza en estimaciones. Fuente: <span class="citation" data-cites="wilke2019">(<a href="references.html#ref-wilke2019" role="doc-biblioref">Wilke, 2019</a>)</span>.
</figcaption>
</figure>
</div>
<p>El caso más habitual es el de mostrar bandas a amobs lados de una recta o curva estimada a partir de un modelo estadístico ajustado a nuestros datos. El gráfico de la <a href="#fig-lm-confint" class="quarto-xref">Figura&nbsp;<span>3.32</span></a> muestra cómo se puede implementar con el paquete <code>ggplot2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos el gráfico de dispersión y añadimos bandas en azul claro</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># marcando el intervalo de confianza al 95% (opción por defecto)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt)) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm, <span class="at">color=</span><span class="st">'red'</span>, <span class="at">fill=</span><span class="st">'lightblue'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-lm-confint" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lm-confint-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-chart-types_files/figure-html/fig-lm-confint-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lm-confint-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.32: Ilustración de un intervalo de confianza del 95% alrededor de una recta de regresión simple ajustada a una nube de puntos
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="arbol-de-decisión-qué-grafico-escojo" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="arbol-de-decisión-qué-grafico-escojo"><span class="header-section-number">3.2</span> Arbol de decisión: ¿qué grafico escojo?</h2>
<p>Como conclusión de este capítulo, seguramente podremos pensar que el gran número de tipos de gráficos de entre los que podemos escoger para nuestro propio trabajo es abrumador. Afortunadamente, existen algunas guías que permiten plantearnos unas sencillas preguntas de diseño para orientar nuestra elección, reduciendo al menos el alcance de la búsqueda a un subconjunto de tipos de gráficos que mejor se adapte a nuestro problema particular.</p>
<p>El sito web <a href="https://www.data-to-viz.com/" class="uri">https://www.data-to-viz.com/</a> publica una imagen en alta resolución (que se puede recibir por correo-e), en la que se resume un sencillo diagrama de decisión para orientar nuestra selección del gráfico más apropiado. En todo caso, esperamos que los comentarios y orientaciones que hemos incluido en este capítulo permitan a futuros creadores/as de gráficos seleccionar con criterios las herramientas a emplear.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-ggalluvial-article" class="csl-entry" role="listitem">
Brunson, J. C. (2020). <span>ggalluvial</span>: Layered Grammar for Alluvial Plots. <em>Journal of Open Source Software</em>, <em>5</em>(49), 2017. <a href="https://doi.org/10.21105/joss.02017">https://doi.org/10.21105/joss.02017</a>
</div>
<div id="ref-cleveland1984dot" class="csl-entry" role="listitem">
Cleveland, W. S. (s.&nbsp;f.). Graphical methods for data presentation: Full scale breaks, dot charts, and multibased logging. <em>The American Statistician</em>, <em>38</em>(4), 270-280.
</div>
<div id="ref-cleveland1981lowess" class="csl-entry" role="listitem">
Cleveland, W. S. (1981). <span>LOWESS</span>: <span>A</span> program for smoothing scatterplots by robust locally weighted regression. <em>American Statistician</em>, <em>35</em>(1), 54.
</div>
<div id="ref-cleveland1992" class="csl-entry" role="listitem">
Cleveland, W. S., Grosse, E., &amp; Shyu, W. M. (1992). Local regression models. En J. M. Chambers &amp; T. J. Hastie (Eds.), <em>Statistical Models in S</em>. Wadsworth &amp; Brooks/Cole.
</div>
<div id="ref-lovelace2025" class="csl-entry" role="listitem">
Lovelace, R., Nowosad, J., &amp; Muenchow, J. (2025). <em>Geocomputation with R</em>. Chapman &amp; Hall. <a href="https://r.geocompx.org/">https://r.geocompx.org/</a>
</div>
<div id="ref-pebesma2023" class="csl-entry" role="listitem">
Pebesma, E., &amp; Bivand, R. (2023). <em>Spatial Data Science with Applications in R</em>. Chapman &amp; Hall. <a href="https://r-spatial.org/book/">https://r-spatial.org/book/</a>
</div>
<div id="ref-tukey1977" class="csl-entry" role="listitem">
Tukey, J. W. (1977). <em>Exploratory Data Analysis</em> (1.ª ed.). Addison-Wesley Pub.
</div>
<div id="ref-wilke2019" class="csl-entry" role="listitem">
Wilke, C. O. (2019). <em>Fundamentals of Data Visualization</em>. O’Reilly Media. <a href="https://clauswilke.com/dataviz/">https://clauswilke.com/dataviz/</a>
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-principles.html" class="pagination-link" aria-label="Principios de visualización de datos">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Principios de visualización de datos</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-grammar.html" class="pagination-link" aria-label="Gramática de gráficos">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Gramática de gráficos</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/glimmerphoenix/taller-reprod-R/blob/main/03-chart-types.qmd" class="toc-action"><i class="bi bi-github"></i>Ver el código</a></li><li><a href="https://github.com/glimmerphoenix/taller-reprod-R/edit/main/03-chart-types.qmd" class="toc-action"><i class="bi empty"></i>Editar esta página</a></li><li><a href="https://github.com/glimmerphoenix/taller-reprod-R/issues/new" class="toc-action"><i class="bi empty"></i>Informar de un problema</a></li></ul></div></div></div></footer></body></html>